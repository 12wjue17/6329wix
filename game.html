<!DOCTYPE html>
<html>
<head>
    <title>盲道导航挑战 - 过马路</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
        }
        .quiz-section {
            border: 2px solid #333;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 10px;
        }
        .game-container {
            display: grid;
            grid-template-columns: repeat(8, 60px);
            gap: 5px;
            margin: 20px 0;
        }
        .cell {
            width: 60px;
            height: 60px;
            border: 2px solid #666;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background-size: cover;
        }
        .circular {
            background: #FFD700 radial-gradient(circle at 50% 50%, #666 15%, transparent 20%);
        }
        .striped {
            background: #4682B4 repeating-linear-gradient(-45deg, 
                transparent, 
                transparent 10px, 
                #fff 10px, 
                #fff 20px);
        }
        .start { background-color: #90EE90; }
        .end { background-color: #FF6347; }
        .correct { border: 3px solid #32CD32 !important; }
        .selected-tile { transform: scale(1.1); }
        button { margin: 10px; padding: 10px 20px; }
    </style>
</head>
<body>
    <h1>盲道导航知识测试</h1>
    
    <div class="quiz-section">
        <h3>问题1：哪种盲道砖用于指示直行？</h3>
        <button onclick="checkQuiz(1, this)">A) 条纹砖</button>
        <button onclick="checkQuiz(1, this)">B) 圆形凸起砖</button>
        <p id="quiz1"></p>

        <h3>问题2：哪种盲道砖用于提示方向变化？</h3>
        <button onclick="checkQuiz(2, this)">A) 条纹砖</button>
        <button onclick="checkQuiz(2, this)">B) 圆形凸起砖</button>
        <p id="quiz2"></p>
    </div>

    <h1>过马路盲道铺设挑战</h1>
    <p>剩余尝试次数：<span id="attempts">3</span></p>
    
    <div class="game-container" id="gameGrid"></div>
    
    <div>
        <button onclick="selectTile('circular')">圆形砖（直行）</button>
        <button onclick="selectTile('striped')">条纹砖（转向）</button>
        <button onclick="validatePath()">验证方案</button>
    </div>

    <script>
        let selectedTile = null;
        let attempts = 3;
        const solution = ['start', 'circular', 'circular', 'circular', 'circular', 'circular', 'circular', 'end'];
        
        // 初始化游戏网格
        function initGame() {
            const grid = document.getElementById('gameGrid');
            grid.innerHTML = '';
            
            for(let i=0; i<8; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.dataset.index = i;
                
                if(i === 0) {
                    cell.className += ' start';
                    cell.textContent = '🚶';
                } 
                else if(i === 7) {
                    cell.className += ' end';
                    cell.textContent = '🚩';
                }
                
                cell.onclick = () => placeTile(i);
                grid.appendChild(cell);
            }
        }

        // 选择题验证
        function checkQuiz(quizNum, btn) {
            const correct = (quizNum === 1 && btn.innerText.includes("B")) || 
(quizNum === 2 && btn.innerText.includes("A"));
            const resultEl = document.getElementById(`quiz${quizNum}`);
            resultEl.textContent = correct ? "✓ 正确！" : "✗ 请重新选择";
            resultEl.style.color = correct ? "green" : "red";
        }

        function selectTile(index) {
            selectedTile = index;
            document.querySelectorAll('button').forEach(btn => 
                btn.classList.remove('selected-tile'));
            event.target.classList.add('selected-tile');
        }

        function placeTile(index) {
            if(!selectedTile || index === 0 || index === 7) return;
            
            const cell = document.querySelector(`[data-index="${index}"]`);
            cell.className = `cell ${selectedTile}`;
        }

        function validatePath() {
            if(attempts <= 0) return;
            
            const cells = document.querySelectorAll('.cell');
            let correct = true;
            
            cells.forEach((cell, i) => {
                const expected = solution[i];
                const actual = cell.className.includes(expected);
                
                if(!actual && i>0 && i<7) {
                    correct = false;
                    cell.style.border = "2px solid red";
                }
            });

            if(correct) {
                alert("恭喜！正确铺设盲道！");
            } else {
                attempts--;
                document.getElementById('attempts').textContent = attempts;
                
                if(attempts === 0) {
                    showSolution();
                    alert("机会用尽，已显示正确答案");
                }
            }
        }

        function showSolution() {
            const cells = document.querySelectorAll('.cell');
            cells.forEach((cell, i) => {
                if(i !== 0 && i !== 7) {
                    cell.className = `cell ${solution[i]}`;
                    cell.classList.add('correct');
                }
            });
        }

        // 初始化游戏
        initGame();
    </script>
</body>
</html>
