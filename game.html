<!DOCTYPE html>
<html>
<head>
    <style>
        .tactile-grid { display: flex; margin: 20px; }
        .tile {
            width: 60px; height: 60px; border: 1px solid #666;
            background: #fff; position: relative;
        }
        /* 行进盲道砖样式 */
        .striped {
            background: repeating-linear-gradient(
                45deg, #ffd700 0px, #ffd700 10px,
                #ff8c00 10px, #ff8c00 20px
            );
        }
        /* 提示盲道砖样式 */
        .dotted {
            background: radial-gradient(circle at 10px 10px, 
                #4682b4 20%, #fff 21%);
            background-size: 20px 20px;
        }
        /* 危险警告砖样式 */
        .warning {
            background: radial-gradient(circle at 15px 15px, 
                #ff0000 30%, #fff 31%);
            background-size: 30px 30px;
        }
        .start::after { content: "🚦"; font-size: 30px; }
        .end::after { content: "🚩"; font-size: 30px; }
    </style>
</head>
<body>
    <h2>盲道规范知识测试</h2>
    
    <div id="quiz">
        <p>1. 行进盲道砖的凸起样式是：</p>
        <button onclick="checkAnswer(1, 'B')">A) 圆点状</button>
        <button onclick="checkAnswer(1, 'A')">B) 条状</button>

        <p>2. 人行横道前应铺设什么砖：</p>
        <button onclick="checkAnswer(2, 'B')">A) 行进盲道砖</button>
        <button onclick="checkAnswer(2, 'A')">B) 提示盲道砖</button>
    </div>

    <h3>过马路盲道铺设挑战</h3>
    <p>规范要求：</p>
    <ul>
        <li>距路缘石30cm处铺设提示盲道砖</li>
        <li>行进盲道砖与提示盲道砖垂直相交</li>
        <li>路口前需有危险警告砖</li>
    </ul>
    <div class="tactile-grid" id="road"></div>
    <p>剩余尝试次数：<span id="attempts">3</span></p>

    <script>
        // 初始化道路
        function initRoad() {
            const road = document.getElementById('road');
            // 创建8格道路：0-路缘石 1-提示砖 2-危险警告 3-5行进砖 6-提示砖 7-人行道
            for(let i=0; i<8; i++){
                let tile = document.createElement('div');
                tile.className = 'tile';
                if(i === 0) tile.classList.add('start');
                if(i === 7) tile.classList.add('end');
                tile.onclick = () => placeTile(i);
                road.appendChild(tile);
            }
        }

        // 专业验证逻辑
        function validate() {
            const tiles = document.getElementsByClassName('tile');
            let errors = [];
            
            // 检查关键节点
            if(!tiles[1].classList.contains('dotted')) errors.push(1);
            if(!tiles[2].classList.contains('warning')) errors.push(2);
            if(!tiles[6].classList.contains('dotted')) errors.push(6);
            
            // 显示专业提示
            if(errors.length > 0){
                showAlert(`错误位置：${errors.join(',')}号砖`);
                decreaseAttempt();
            } else {
                showAlert("符合GB/T 12952-2020规范！", 'success');
            }
        }

        // 三次机会用尽后显示标准答案
        function showAnswer() {
            const indices = {1:'dotted', 2:'warning', 3:'striped', 
                           4:'striped', 5:'striped', 6:'dotted'};
            Object.entries(indices).forEach(([idx,cls]) => {
                document.getElementsByClassName('tile')[idx].classList.add(cls);
            });
        }
    </script>
</body>
</html>
