<!DOCTYPE html>
<html>
<head>
    <title>Tactile Navigation Challenge</title>
    <style>
        .game-container {
            display: grid;
            grid-template-columns: repeat(8, 50px);
            gap: 2px;
            margin: 20px;
        }
        .cell {
            width: 50px;
            height: 50px;
            border: 1px solid #ccc;
            position: relative;
            background: #f0f0f0;
        }
        .circular {
            background: #ffd700 radial-gradient(circle at 50% 50%, #666 15%, transparent 20%);
        }
        .striped {
            background: #4682b4 repeating-linear-gradient(45deg, #fff, #fff 5px, #4682b4 5px, #4682b4 10px);
        }
        .start-point::after {
            content: "üö∂";
            font-size: 30px;
            position: absolute;
            bottom: -5px;
        }
        .end-point::after {
            content: "üö©";
            font-size: 30px;
            position: absolute;
            top: -10px;
            right: -5px;
        }
        .attempts {
            color: #ff4444;
            font-weight: bold;
            margin: 10px;
        }
        .solution {
            background: #90EE90 !important;
        }
    </style>
</head>
<body>
    <h2>üö¶ Game Rules</h2>
    <div>
        <p>üîµ Use CIRCULAR tiles for straight paths</p>
        <p>üî∂ Use STRIPED tiles before turns</p>
        <p>üö∂ Connect START to üö© END with continuous path</p>
        <p>‚ùå 3 attempts per scene</p>
    </div>

    <div class="attempts">Attempts left: <span id="attempts">3</span></div>
    
    <button onclick="switchScene(0)">Scene 1: Straight Path</button>
    <button onclick="switchScene(1)">Scene 2: L-shaped Turn</button>
    
    <div class="button-group">
        <button onclick="selectTile('circular')">Circular Tile</button>
        <button onclick="selectTile('striped')">Striped Tile</button>
    </div>

    <div class="game-container" id="grid"></div>
    <button onclick="validatePath()">Check Solution</button>

    <script>
        let currentScene = 0;
        let selectedTile = null;
        let attempts = 3;
        const scenes = [
            {
                start: [0, 3],
                end: [7, 3],
                solution: [[0,3],[1,3],[2,3],[3,3],[4,3],[5,3],[6,3],[7,3]]
            },
            {
                start: [0, 3],
                end: [7, 7],
                solution: [[0,3],[1,3],[2,3],[3,3],[3,4],[3,5],[3,6],[3,7],[4,7],[5,7],[6,7],[7,7]]
            }
        ];

        function initGrid() {
            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            
            for(let y=0; y<8; y++) {
                for(let x=0; x<8; x++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    if(x === scenes[currentScene].start[0] && y === scenes[currentScene].start[1]) {
                        cell.classList.add('start-point');
                    }
                    if(x === scenes[currentScene].end[0] && y === scenes[currentScene].end[1]) {
                        cell.classList.add('end-point');
                    }
                    cell.dataset.x = x;
                    cell.dataset.y = y;
                    cell.onclick = () => placeTile(x, y);
                    grid.appendChild(cell);
                }
            }
        }

        function selectTile(type) {
            selectedTile = type;
            document.querySelectorAll('.button-group button').forEach(btn => 
                btn.style.backgroundColor = btn.innerText.includes(type) ? '#ddd' : ''
            );
        }

        function placeTile(x, y) {
            if(!selectedTile) return;
            const cell = document.querySelector(`[data-x="${x}"][data-y="${y}"]`);
            if(cell.classList.contains('start-point') || cell.classList.contains('end-point')) return;
            
            cell.className = `cell ${selectedTile}`;
        }

        function validatePath() {
            if(attempts <= 0) return;
            
            attempts--;
            document.getElementById('attempts').textContent = attempts;
            
            const solution = scenes[currentScene].solution;
            const cells = Array.from(document.querySelectorAll('.cell'));
            let isValid = true;

            cells.forEach(cell => {
                const x = parseInt(cell.dataset.x);
                const y = parseInt(cell.dataset.y);
                const isSolution = solution.some(pos => pos[0] === x && pos[1] === y);
                
                if(isSolution) {
                    const correctType = solution.indexOf([x,y]) === solution.length-1 ? 'circular' : 
                                      solution[0][0] !== solution[1][0] ? 'striped' : 'circular';
                    
                    if(!cell.classList.contains(correctType)) isValid = false;
                }
            });

            if(!isValid) {
                alert(`Path invalid! ${attempts} attempts remaining`);
                if(attempts === 0) showSolution();
            } else {
                alert("Congratulations! Path is accessible!");
            }
        }

        function showSolution() {
            scenes[currentScene].solution.forEach(([x,y]) => {
                const cell = document.querySelector(`[data-x="${x}"][data-y="${y}"]`);
                cell.classList.add('solution');
            });
        }

        function switchScene(index) {
            currentScene = index;
            attempts = 3;
            document.getElementById('attempts').textContent = 3;
            initGrid();
        }

        initGrid();
    </script>
</body>
</html>
